"use strict";(self.webpackChunkdhenara_docs=self.webpackChunkdhenara_docs||[]).push([[7127],{3361:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>o,contentTitle:()=>l,default:()=>u,frontMatter:()=>i,metadata:()=>a,toc:()=>c});const a=JSON.parse('{"id":"dhenara-ai/guides/advanced-recipes","title":"Advanced Recipes","description":"If you\u2019re evaluating Dhenara AI, this page is the fastest way to see why it\u2019s more than \u201cjust another wrapper\u201d.","source":"@site/docs/dhenara-ai/guides/advanced-recipes.md","sourceDirName":"dhenara-ai/guides","slug":"/dhenara-ai/guides/advanced-recipes","permalink":"/dhenara-ai/guides/advanced-recipes","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"Advanced Recipes"},"sidebar":"dhenaraAiSidebar","previous":{"title":"Image Generation","permalink":"/dhenara-ai/samples/image-gen/"},"next":{"title":"Runnable Examples Index","permalink":"/dhenara-ai/guides/runnable-examples"}}');var s=t(4848),r=t(8453);const i={title:"Advanced Recipes"},l="Advanced Recipes",o={},c=[{value:"Recipe 1: Multi-turn, the \u201ccorrect\u201d way",id:"recipe-1-multi-turn-the-correct-way",level:2},{value:"Recipe 2: Streaming + final accumulated response",id:"recipe-2-streaming--final-accumulated-response",level:2},{value:"Recipe 3: Structured output (validated)",id:"recipe-3-structured-output-validated",level:2},{value:"Recipe 4: Tools/function calling (multi-turn loop)",id:"recipe-4-toolsfunction-calling-multi-turn-loop",level:2},{value:"Recipe 5: Artifacts (debugging superpower)",id:"recipe-5-artifacts-debugging-superpower",level:2},{value:"Canonical runnable examples",id:"canonical-runnable-examples",level:2},{value:"Where to go next",id:"where-to-go-next",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"advanced-recipes",children:"Advanced Recipes"})}),"\n",(0,s.jsx)(n.p,{children:"If you\u2019re evaluating Dhenara AI, this page is the fastest way to see why it\u2019s more than \u201cjust another wrapper\u201d."}),"\n",(0,s.jsxs)(n.p,{children:["Dhenara\u2019s core advantage is that ",(0,s.jsx)(n.strong,{children:"advanced workflows stay simple"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Multi-turn conversations with a provider-friendly Messages API"}),"\n",(0,s.jsx)(n.li,{children:"Streaming that always yields both deltas and the final accumulated response"}),"\n",(0,s.jsx)(n.li,{children:"Structured output validated with Pydantic schemas"}),"\n",(0,s.jsx)(n.li,{children:"Tools/function calling with normalized content items"}),"\n",(0,s.jsx)(n.li,{children:"Artifacts that capture request/response data for debugging"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"recipe-1-multi-turn-the-correct-way",children:"Recipe 1: Multi-turn, the \u201ccorrect\u201d way"}),"\n",(0,s.jsxs)(n.p,{children:["Use ",(0,s.jsx)(n.code,{children:"messages"})," for chatbots and workflows. You keep history, then append the assistant message back into history."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'from dhenara.ai.types.genai.dhenara.request import MessageItem, Prompt\n\nmessages: list[MessageItem] = []\n\nmessages.append(Prompt.with_text("Give me 3 names for a new CLI tool"))\nresp1 = client.generate(messages=messages)\nmessages.append(resp1.chat_response.to_message_item())\n\nmessages.append(Prompt.with_text("Pick the best name and write a 1-paragraph pitch"))\nresp2 = client.generate(messages=messages)\nprint(resp2.chat_response.text())\n'})}),"\n",(0,s.jsxs)(n.p,{children:["More detail: see ",(0,s.jsx)(n.strong,{children:"Prompts & Messages"}),"."]}),"\n",(0,s.jsx)(n.h2,{id:"recipe-2-streaming--final-accumulated-response",children:"Recipe 2: Streaming + final accumulated response"}),"\n",(0,s.jsx)(n.p,{children:"Streaming gives you incremental deltas and also a final response object you can safely parse (usage, structured output, etc.)."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"resp = client.generate(messages=messages)\n\nfor chunk, final in resp.stream_generator:\n    # render token deltas (optional)\n    pass\n\nif final and final.chat_response:\n    print(final.chat_response.text())\n"})}),"\n",(0,s.jsx)(n.h2,{id:"recipe-3-structured-output-validated",children:"Recipe 3: Structured output (validated)"}),"\n",(0,s.jsx)(n.p,{children:"Define a Pydantic schema and ask the model to produce it. Then validate and consume it as data, not text."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'from pydantic import BaseModel, Field\nfrom dhenara.ai.types import AIModelCallConfig\n\n\nclass TaskPlan(BaseModel):\n    title: str\n    steps: list[str] = Field(..., min_length=1)\n\n\nclient = AIModelClient(\n    model_endpoint=endpoint,\n    config=AIModelCallConfig(\n        structured_output=TaskPlan,\n        max_output_tokens=800,\n    ),\n)\n\nresp = client.generate(prompt="Create a 5-step migration plan from Flask to Django")\nplan = resp.chat_response.structured()\nprint(plan["title"], plan["steps"][0])\n'})}),"\n",(0,s.jsxs)(n.p,{children:["More detail: see ",(0,s.jsx)(n.strong,{children:"Structured Output (Pydantic)"}),"."]}),"\n",(0,s.jsx)(n.h2,{id:"recipe-4-toolsfunction-calling-multi-turn-loop",children:"Recipe 4: Tools/function calling (multi-turn loop)"}),"\n",(0,s.jsx)(n.p,{children:"Tools are normalized into content items. In multi-turn workflows:"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["Append the assistant message as a whole (",(0,s.jsx)(n.code,{children:"to_message_item()"}),")"]}),"\n",(0,s.jsx)(n.li,{children:"Execute tool calls"}),"\n",(0,s.jsxs)(n.li,{children:["Append tool results (",(0,s.jsx)(n.code,{children:"ToolCallResult"}),")"]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["More detail: see ",(0,s.jsx)(n.strong,{children:"Tools & Function Calling"}),"."]}),"\n",(0,s.jsx)(n.h2,{id:"recipe-5-artifacts-debugging-superpower",children:"Recipe 5: Artifacts (debugging superpower)"}),"\n",(0,s.jsx)(n.p,{children:"When you\u2019re diagnosing provider differences, formatting issues, or validation failures, enable artifacts per call."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'from dhenara.ai.types import AIModelCallConfig\nfrom dhenara.ai.types.genai.dhenara.request import ArtifactConfig\n\nclient = AIModelClient(\n    model_endpoint=endpoint,\n    config=AIModelCallConfig(\n        artifact_config=ArtifactConfig(\n            enabled=True,\n            artifact_root="./runs/my_debug_run/turn_01",\n            prefix="call_001",\n            capture_dhenara_request=True,\n            capture_provider_request=True,\n            capture_provider_response=True,\n            capture_dhenara_response=True,\n        )\n    ),\n)\n'})}),"\n",(0,s.jsxs)(n.p,{children:["More detail: see ",(0,s.jsx)(n.strong,{children:"Artifacts & Debugging"}),"."]}),"\n",(0,s.jsx)(n.h2,{id:"canonical-runnable-examples",children:"Canonical runnable examples"}),"\n",(0,s.jsxs)(n.p,{children:["Want the full map from \u201ccapability\u201d \u2192 \u201cscript\u201d? See the ",(0,s.jsx)(n.a,{href:"/dhenara-ai/guides/runnable-examples",children:"Runnable Examples Index"}),"."]}),"\n",(0,s.jsx)(n.p,{children:"These examples show the full \u201cproduction recipe\u201d patterns end-to-end:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Tools + messages API: ",(0,s.jsx)(n.code,{children:"16_multi_turn_with_tools_and_messages_api.py"})]}),"\n",(0,s.jsxs)(n.li,{children:["Structured output: ",(0,s.jsx)(n.code,{children:"21_structed_output.py"})]}),"\n",(0,s.jsxs)(n.li,{children:["Function calling: ",(0,s.jsx)(n.code,{children:"20_fn_calling.py"})]}),"\n",(0,s.jsxs)(n.li,{children:["Streaming + tools + structured output: ",(0,s.jsx)(n.code,{children:"18_streaming_multi_turn_with_tools_and_structured_output.py"})]}),"\n",(0,s.jsxs)(n.li,{children:["Streaming + multi-turn + structured + reasoning + validation: ",(0,s.jsx)(n.code,{children:"19_streaming_multi_turn_structured_thinking.py"})]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"where-to-go-next",children:"Where to go next"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"/dhenara-ai/guides/prompt-formatter",children:"Prompts & Messages"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"/dhenara-ai/guides/structured-output",children:"Structured Output (Pydantic)"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"/dhenara-ai/guides/tools-and-function-calling",children:"Tools & Function Calling"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"/dhenara-ai/guides/artifacts-and-debugging",children:"Artifacts & Debugging"})}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>i,x:()=>l});var a=t(6540);const s={},r=a.createContext(s);function i(e){const n=a.useContext(r);return a.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),a.createElement(r.Provider,{value:n},e.children)}}}]);